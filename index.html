<!DOCTYPE html>
<html lang="en">
<!-- 
    TODO : Setting popup (limit)
    TODO : Clear Chat
    TODO : Date msgs
    TODO : Copy Text
-->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Chat</title>
    <link rel="stylesheet" href="./public/styles/bootstrap.min.css">
    <link rel="stylesheet" href="./public/styles/style.css">
    <script src="./public/scripts/js.cookie.min.js"></script>
    <script src="./public/scripts/script.js"></script>
    
</head>
<script>
    function closePopup() {
        document.querySelector(".main-pop").style.display = "none";
    }
    function openPopup() {
        document.querySelector(".main-pop").style.display = "flex";
    }
    var Chat = new chat();
    var User = Cookies.get('userName')
    
    // Chat.send()
    document.addEventListener('DOMContentLoaded', () => {
        if (User) {
            closePopup()
            setInterval(()=>{
                Chat.loadMsgs()
            },500)
        }
    })
</script>

<body>
    <div style="overflow-x: auto;height: 100vh;" class="main-pop">
        <div class="popup row justify-content-center align-items-center">
            <div class="dispop col-1 row justify-content-center p-5 rounded-4">
                <div class="row justify-content-center w-75">
                    <div class="col-5">
                        <input type="text" class="w-100" placeholder="Enter Your name" name="" id="username">
                    </div>
                    <div class="col-2">
                        <button style="padding-left: 5%;padding-right: 5%;" onclick="Chat.setName()">Change</button>
                    </div>
                </div>
                <div class="col-12 row justify-content-center">
                    <button class="mt-5 col-2" onclick="closePopup()">close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="main row align-items-center justify-content-center p-1">
        <div class="chat mb-4">

        </div>
        <div class="form row align-items-center justify-content-center">
            <!-- <input type="text" class="col-7" name="Message" id="Message"> -->
            <textarea name="Message" class="col-7 Message" id="Message" cols="30" rows="5"></textarea>
            <div class="col-1"></div>
            <div class="row col-2">
                <button class="send col-12" onclick="Chat.send()">send</button>
                <button class="setting col-12" onclick="openPopup()">setting</button>
            </div>

        </div>
    </div>
</body>

</html>